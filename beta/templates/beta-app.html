{% extends "beta-base.html" %}
{% load i18n %}
{% block title %}Dareyoo (beta){% endblock %}
{% block css %}
{{ block.super }}
    <style type="text/css">
    body { margin-top: 0px; }

    /* Explanation of the following line: http://angular-ui.github.io/bootstrap/ */
    .nav, .pagination, .carousel, .panel-title a { cursor: pointer; }

    .container {
      max-width: 1000px;
    }
    .new-bet-tips{width:300px;max-width:300px;}
    .bet-list { border: 1px solid black; }
    .bet-row { border-bottom: 1px solid #CCC; margin: 2px; padding:5px; }
    .bet-image { padding: 10px; }
    .bet-text { padding: 10px; max-width: 65%; }
    .bet-username { font-family: Tahoma, Geneva, sans-serif; font-weight: bold; font-size: 1em; padding-right: 10px; }
    .bet-title { font-family: Tahoma, Geneva, sans-serif; font-size: 1.3em; }
    .bet-closing { color:red; font-family: Tahoma, Geneva, sans-serif; font-size: 0.8em; margin-bottom: 0px; }
    .user-profile-link { color: black; text-align: center; }
    .profile-image { display:block; margin: auto; }
    .view-profile { color: gray; font-size: 0.8em; }
    .coins-available { color: green; font-family: Tahoma, Geneva, sans-serif; font-weight: bold; font-size: 1.2em; }
    .coins-locked { color: orange; font-family: Tahoma, Geneva, sans-serif; font-weight: bold; font-size: 1em; }
    .points { color: black; font-family: Tahoma, Geneva, sans-serif; font-weight: bold; font-size: 0.9em; margin-top: 20px; }
    .num-points { font-size: 4em; }
    .text-points { color: #999; padding-top: 10px; }
    .sidebar-nav { margin-top: 20px; }
    .new_notifications_num { padding: 5px; text-align: center; }
    /*.dropdown-menu>li.unread>a{ background-color: #EEBBFF; }
    .dropdown-menu>li.unread>a:hover{ background-color: #DD99FF; }
    .dropdown-menu>li>a:hover{ background-color: #DDDDDD; }*/
    </style>
{% endblock %}

{% block body %}<body ng-app="dareyoo">{% endblock %}

{% block navbar %}
<base href="/app/"></base>
<nav class="navbar navbar-inverse">
  <!-- Brand and toggle get grouped for better mobile display -->
  <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-app-navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#">Dareyoo (beta)</a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="main-app-navbar-collapse">
        <ul class="nav navbar-nav navbar-left">
          <li ng-class="{ active: $state.includes('main') }"><a href="#" ui-sref="main.timeline"><span class="glyphicon glyphicon-home"></span> Home</a></li>
          <li ng-class="{ active: $state.includes('profile') }" ng-if="user"><a href="#" ui-sref="profile.bets({userId:user.id})"><span class="glyphicon glyphicon-user"></span> My profile</a></li>
          <li ng-class="{ active: $state.includes('rankings') }"><a href="#" ui-sref="rankings"><span class="glyphicon glyphicon-list"></span> Rankings</a></li>
        </ul>
        <div class="navbar-form navbar-left" role="search" ng-controllerkk="SearchCtrl">
          <div class="form-group">
            <input type="text" class="form-control" placeholder="Search" ng-model="q.query">
          </div>
          <button type="button" class="btn btn-default" ng-click="search()"><span class="glyphicon glyphicon-search"></span></button>
        </div>
        <ul class="nav navbar-nav navbar-right">
          <li ng-if="user"><button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#newBetModal"><span class="glyphicon glyphicon-plus"></span></button></li>
          <li class="dropdown" ng-if="user">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" ng-click="notificationsClick()"><span class="badge"><span class="glyphicon glyphicon-inbox"></span><span class="new_notifications_num">[[new_notifications > 0? new_notifications : ""]]</span><b class="caret"></b></span></a>
            <ul class="dropdown-menu">
              <li ng-repeat="note in notifications" ng-class="{'unread': !note.readed}">
                <a ng-if="note.bet" href="#" ui-sref="main.bet({betId:note.bet})" ng-click="notificationClick(note)"><span ng-if="!note.readed" class="glyphicon glyphicon-envelope"></span> [[note.subject]]</a>
                <a ng-if="!note.bet" href="#" ui-sref="profile.bets({userId:note.user})" ng-click="notificationClick(note)"><span ng-if="!note.readed" class="glyphicon glyphicon-envelope"></span> [[note.subject]]</a>
              </li>
            </ul>
          </li>
          <li ng-if="user"><a href="{% url "beta-logout" %}"><span class="glyphicon glyphicon-log-out"></span> Logout</a></li>
          <li ng-if="!user"><a href="{% url "beta-login" %}">Login <span class="glyphicon glyphicon-log-in"></span></a></li>
        </ul>
      </div><!-- /.navbar-collapse -->
    </div>
</nav>
{% endblock %}

{% block content %}
    <div class="modal fade" id="newBetModal" tabindex="-1" role="dialog" aria-labelledby="newBetLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title" id="newBetLabel">New Bet</h4>
          </div>
          <div class="modal-body">
            <div class="container" style="width:100%">
              <form role="form">
                <div class="row">
                  <div class="col-md-12"><textarea class="form-control" id="TextArea" placeholder="What's your bet?"></textarea></div>
                </div>
                <div class="row">
                  <label class="col-md-4" for="amount">For</label>
                  <div class="col-md-8"><input type="number" class="form-control" id="amount" value="10"></div>
                </div>
                <div class="row">
                  <label class="col-md-4" for="amount">Closing</label>
                  <div class="col-md-8"><select class="form-control" ng-options="['10 min', '30 min']"></select></div>
                </div>
                <div class="row">
                  <label class="col-md-4" for="amount">Finishing</label>
                  <div class="col-md-8"><select class="form-control" ng-options="['2 hours', '6 hours']"></select></div>
                </div>
              </form>
            </div>
          </div>
          <div class="modal-footer">
            <!-- <button type="button" class="btn btn-default" data-dismiss="modal">Close</button> -->
            <button type="button" class="btn btn-primary btn-block">Basic</button>
            <button type="button" class="btn btn-primary btn-block">Auction</button>
            <button type="button" class="btn btn-primary btn-block">Lottery</button>
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <div ui-view></div>
    </div>
{% endblock %}

{% block js %}
<script src="{{ STATIC_URL }}beta/build/js/dareyoo.all.min.js"></script>
<script type="text/javascript">
  angular.module('dareyoo').
  constant('config', {static_url: {{ STATIC_URL }} });
</script>
{% endblock %}